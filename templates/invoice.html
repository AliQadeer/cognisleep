<style>
   .backBtn {
    left: 0;
    background-color: #00a115;
    border: none;
    border-radius: 50px;
    width: 36px;
    height: 36px;
    margin-top: -40px;
    z-index: 9999;
    top: 20px;
    color: #ffff;
}

.backBtn:hover {
    background-color: #79ce4a;
}
</style>

<html lang="en">
   <head>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <meta charset="utf-8">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.debug.js"></script>

   </head>

   <body style="
      position: relative;
      width: 28cm;
      height: 29.7cm;
      margin: 0 auto;
      color: #001028;
      background: #FFFFFF;
      font-family: sans-serif;
      font-size: 14px;
      font-family: Arial;
      ">


      <div class="content-wrap py-5 container" id="invoice" style="margin-bottom: 0px; padding-bottom: 3pc; width: 1058.27px; max-width: none; display: block !important;">
         <header class="clearfix" style="
            padding: 10px 0;
            margin-bottom: 30px;
            ">
            <div id="logo" style="
               text-align: center;
               margin-bottom: 10px;
               ">
               <img src="/static/assets/images/logo-1.png" style="max-width: 100%; width: 45%;">
            </div>
            <h1 style="
               border-top: 1px solid #5D6975;
               border-bottom: 1px solid #5D6975;
               color: #5D6975;
               font-size: 24px;
               line-height: 1.4em;
               font-weight: normal;
               text-align: center;
               margin: 0 0 20px 0;
               ">Invoice No: <span>{{ invoice_number }}</span></h1>
            <form>
                 <input type="hidden" id="invoice_number" value="{{invoice_number}}">
                 <!-- other form elements -->
               </form>

            <div id="company" class="clearfix" style="
               float: right;
               text-align: right;
               ">
               <div class="status" style="
                  text-transform: capitalize;
                   font-weight: 600;
                  "><span style="
                  font-weight: 400;
                  ">Status: </span>{{ invoice_status }}</div>
            </div>
            <div id="project" style="
               float: left;
               ">
               <!--<div style="
                  white-space: nowrap;
                  font-size: 14px;
                  "><span style="
                  color: #000;
                  text-align: right;
                  width: 55%;
                  margin-right: 10px;
                  display: inline-block;
                  font-size: 14px;
                  ">Account Name: </span> {{ account_name }}</div>-->
               <div style="
                  white-space: nowrap;
                  font-size: 14px;
                  "><span style="
                  color: #000;
                  text-align: right;
                  width: 55%;
                  margin-right: 10px;
                  display: inline-block;
                  font-size: 14px;
                  ">Customer Name: </span> {{ customer_name }}</div>
               <!--<div style="
                  white-space: nowrap;
                  font-size: 14px;
                  "><span style="
                  color: #000;
                  text-align: right;
                  width: 55%;
                  margin-right: 10px;
                  display: inline-block;
                  font-size: 14px;
                  ">Country Name: </span> {{ country }}</div>-->
               <div style="
                  white-space: nowrap;
                  font-size: 14px;
                  "><span style="
                  color: #000;
                  text-align: right;
                  width: 55%;
                  margin-right: 10px;
                  display: inline-block;
                  font-size: 14px;
                  ">Email: </span> {{ customer_email }}</div>
               <div style="
                  white-space: nowrap;
                  font-size: 14px;
                  "><span style="
                  color: #000;
                  text-align: right;
                  width: 55%;
                  margin-right: 10px;
                  display: inline-block;
                  font-size: 14px;
                  ">Invoice Date: </span> {{ invoice_date }}</div>
            </div>
         </header>
         <main style=" position: relative; top: 35px;">
            <table style="
               width: 100%;
               border-collapse: collapse;
               border-spacing: 0;
               margin-bottom: 20px;
               ">
               <thead>
                  <tr>
                     <th class="service" style="
                        padding: 20px;
                            border-top: 1px solid #C1CED9;
                        color: #5D6975;
                        border-bottom: 1px solid #C1CED9;
                        white-space: nowrap;
                        text-align: left;
                        font-weight: normal;
                        ">SUSBCRIPTION</th>
                     <th style="
                        padding: 20px;
                            border-top: 1px solid #C1CED9;
                        color: #5D6975;
                        border-bottom: 1px solid #C1CED9;
                        white-space: nowrap;
                        text-align: left;
                        font-weight: normal;
                        ">START DATE</th>
                     <th style="
                        padding: 20px;
                            border-top: 1px solid #C1CED9;
                        color: #5D6975;
                        border-bottom: 1px solid #C1CED9;
                        white-space: nowrap;
                        text-align: left;
                        font-weight: normal;
                        ">END DATE</th>
                     <th class="desc" style="
                        padding: 20px;
                            border-top: 1px solid #C1CED9;
                        color: #5D6975;
                        border-bottom: 1px solid #C1CED9;
                        white-space: nowrap;
                        text-align: left;
                        font-weight: normal;
                        ">PAY TYPE</th>
                     <th style="
                        padding: 20px;
                            border-top: 1px solid #C1CED9;
                        color: #5D6975;
                        border-bottom: 1px solid #C1CED9;
                        white-space: nowrap;
                        font-weight: normal;
                        ">PRICE</th>
                     <th style="
                        padding: 20px;
                            border-top: 1px solid #C1CED9;
                        color: #5D6975;
                        border-bottom: 1px solid #C1CED9;
                        white-space: nowrap;
                        font-weight: normal;
                        ">TOTAL</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td class="service" style="
                        background: #F5F5F5;
                        text-align: left;
                        padding: 20px;
                        ">{{ package }}</td>
                     <td class="service" style="
                        background: #F5F5F5;
                        text-align: left;
                        padding: 20px;
                        ">{{ start_date }}</td>
                     <td class="service" style="
                        background: #F5F5F5;
                        text-align: left;
                        padding: 20px;
                        ">{{ end_date }}</td>
                     <td class="service" style="
                        background: #F5F5F5;
                        text-align: left;
                        padding: 20px;
                        ">{{ pay_type}} / {{ card_brand }}</td>
                     <td class="unit" style="
                        background: #F5F5F5;
                            text-align: right;
                        padding: 20px;
                        ">{{ amountt }}.00 <span class="text-uppercase" style="text-transform: uppercase;">{{currency }}</span>
                     </td>
                     <td class="total" style="
                        background: #F5F5F5;
                            text-align: right;
                        padding: 20px;
                        ">{{ amountt }}.00 <span class="text-uppercase" style="text-transform: uppercase;">{{currency }}</span>
                     </td>
                  </tr>
                  <tr>
                     <td colspan="5" style="
                        padding: 20px;
                        text-align: right;
                        ">SUBTOTAL</td>
                     <td class="total" style="
                        padding: 20px;
                        text-align: right;
                        ">{{ amountt }}.00 <span class="text-uppercase" style="
                        text-transform: uppercase;
                        ">{{currency }}</span></td>
                  </tr>
                  <tr>
                     <td colspan="5" class="grand total" style="
                        background: #F5F5F5;
                        border-top: 1px solid #5D6975;
                        padding: 20px;
                        text-align: right;
                        ">GRAND TOTAL</td>
                     <td class="grand total" style="
                        background: #F5F5F5;
                        border-top: 1px solid #5D6975;
                        padding: 20px;
                        text-align: right;
                        ">{{ amountt }}.00 <span class="text-uppercase" style="
                        text-transform: uppercase;
                        ">{{currency }}</span></td>
                  </tr>

               </tbody>

            </table>
         </main>
      </div>
      <div class="row">
            <input type="button" id="create_pdf" value="Download Invoice" style="
    display: block;
    margin: auto;
    background-color: #200b94;
    border: none;
    color: #fff;
    padding: 14px 30px;
    font-size: 18px;
    border-radius: 27px;
">
         <button onclick="history.back();" class="backBtn"><i class="fa fa-arrow-left"></i></button>
      </div>
   </body>

   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
   <script>
      $(document).ready(function () {
      var form = $('#invoice'),
      cache_width = form.width(),
      a3 = [cache_width, 500.89]; // for a4 size paper width and height

      $('#create_pdf').on('click', function () {
          $('body').scrollTop(0);
          createPDF();
      });

      function createPDF() {
      var invoice_number = $('#invoice_number').val();
          getCanvas().then(function (canvas) {
              var
               img = canvas.toDataURL("image/png"),
               doc = new jsPDF({
                   unit: 'px',
                   format: 'a3'
               });
               doc.setFontSize(10);
              doc.addImage(img, 'JPEG', 20, 20);
              doc.save('CogniSleep_' + invoice_number);
<!--              form.width(cache_width);-->
          });
      }

      function getCanvas() {
<!--          form.width((a4[0] * 1.33333) - 80).css('max-width', 'none');-->
          return html2canvas(form, {
              imageTimeout: 2000,
              removeContainer: true
          });
      }
      });
   </script>
</html>